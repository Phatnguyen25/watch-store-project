{% extends 'base.html' %}
{% load humanize %}  
{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8 text-center">Gi·ªè H√†ng C·ªßa B·∫°n</h1>

    {% if cart_items %}
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <table class="w-full">
                <thead class="bg-gray-100 border-b">
                    <tr>
                        <th class="p-4 text-left">S·∫£n ph·∫©m</th>
                        <th class="p-4 text-center">S·ªë l∆∞·ª£ng</th>
                        <th class="p-4 text-right">Th√†nh ti·ªÅn</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in cart_items %}
                    <tr class="border-b hover:bg-gray-50">
                        <td class="p-4">
        <div class="flex items-center">
            <div class="flex-shrink-0 w-16 h-16 border rounded overflow-hidden mr-4">
                {% if item.product.image %}
                    <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" class="w-full h-full object-cover">
                {% else %}
                    <div class="w-full h-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs">No IMG</div>
                {% endif %}
            </div>
            <div>
                <h3 class="text-lg font-bold text-gray-900">
                    <a href="{% url 'store:product_detail' item.product.pk %}" class="hover:text-blue-600">
                        {{ item.product.name }}
                    </a>
                </h3>
                <p class="text-sm text-gray-500">
                    ƒê∆°n gi√°: {{ item.product.price|intcomma }} ƒë
                </p>
            </div>
        </div>
    </td>
                        
                        <td class="p-4 text-center">
                            <div class="flex items-center justify-center gap-3">
                                <a href="{% url 'store:update_cart' item.id 'decrease' %}" 
                                   class="w-8 h-8 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center hover:bg-gray-300 font-bold transition">
                                    -
                                </a>

                                <span class="font-bold text-lg w-8">{{ item.quantity }}</span>

                                <a href="{% url 'store:update_cart' item.id 'increase' %}" 
                                   class="w-8 h-8 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center hover:bg-gray-300 font-bold transition">
                                    +
                                </a>
                            </div>
                        </td>

                        <td class="p-4 text-right">
                            <div class="font-bold text-blue-600 text-lg mb-1">
                                {{ item.total_price|intcomma }} ƒë
                            </div>
                            <a href="{% url 'store:remove_from_cart' item.id %}" 
                               class="text-red-500 text-sm hover:underline hover:text-red-700"
                               onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s·∫£n ph·∫©m n√†y?')">
                                X√≥a b·ªè
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot class="bg-gray-50">
                    <tr>
                        <td colspan="2" class="p-4 text-right font-bold text-xl">T·ªïng thanh to√°n:</td>
                        <td class="p-4 text-right font-bold text-2xl text-red-600">
                            {{ total_price|intcomma }} ƒë
                        </td>
                    </tr>
                </tfoot>
            </table>
            
            <div class="p-6 text-right bg-gray-50 border-t">
                <a href="#" class="inline-block bg-green-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-green-700 transition shadow-lg">
                    Ti·∫øn H√†nh Thanh To√°n ‚Üí
                </a>
            </div>
        </div>
    {% else %}
        <div class="text-center py-16 bg-white rounded-lg shadow-sm">
            <div class="text-6xl mb-4">üõí</div>
            <p class="text-gray-500 text-xl mb-6">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng tr∆°n!</p>
            <a href="{% url 'store:product_list' %}" class="inline-block border-2 border-blue-600 text-blue-600 font-semibold py-2 px-6 rounded hover:bg-blue-600 hover:text-white transition">
                ‚Üê Quay l·∫°i mua s·∫Øm
            </a>
        </div>
    {% endif %}
</div>
{% endblock %}